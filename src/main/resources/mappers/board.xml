<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gma.gmagame.mapper.BoardMapper">
    <select id="getSelectCnt" resultType="Integer">
        SELECT COUNT(*)
        FROM BOARD_C
    </select>
    <select id="selectAll" resultType="com.gma.gmagame.model.Board">
        SELECT *
        FROM BOARD_C
        ORDER BY BOARD_IDX ASC
    </select>
    <select id="selectOne" resultType="com.gma.gmagame.model.Board">
        SELECT *
        FROM board_c
        WHERE board_idx=#{user_idx}
    </select>
    <update id="updateViewCnt" parameterType="com.gma.gmagame.model.Board">
        UPDATE board_c
        SET hit_cnt = hit_cnt+1
        WHERE board_idx=#{user_idx}
    </update>

    <insert id="insertOne" parameterType="com.gma.gmagame.model.Board">
        <selectKey resultType="Integer" keyProperty="user_idx" order="BEFORE">
            SELECT NVL(MAX(board_idx),0)+1
            FROM board_c
        </selectKey>
        INSERT INTO board_c (board_idx,title,contents,created_datetime)
        VALUES(#{user_idx},#{title},#{contents},SYSDATE)
    </insert>

    <delete id="deleteOne" parameterType="com.gma.gmagame.model.Board">
        DELETE
        FROM board_c
        WHERE board_idx=#{user_idx}
    </delete>

    <update id="updateOne" parameterType="com.gma.gmagame.model.Board">
        UPDATE board_c
        SET title =#{title},contents=#{contents}
        WHERE board_idx=#{user_idx}
    </update>
</mapper>